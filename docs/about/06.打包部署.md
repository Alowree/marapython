---
title: 打包部署
date: 2024-05-25 10:41:18
order:
---

## 打包

运行 `pnpm run docs:build` 打包时，出现关于 chunk size 报错：

```ps
(!) Some chunks are larger than 1000 kB after minification. Consider:
- Using dynamic import() to code-split the application
- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks
- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.
```

解决方法：修改 `/docs/.vitepress/config/vite.ts` 配置文件内的 `chunkSizeWarningLimit`，把它由原来的 `1000` 更改为一个较大的数值 `10000`，报错便会走开。如此变更的后果，未知。

<<< @/.vitepress/config/vite.ts {26}

运行 `pnpm run docs:preview` 本地预览，发现首页样式丢失，导致显示错乱。

网查，尝试，无效方案：

继续排查中。

## 部署

1. 登录 Github 新建一个空的远程仓库，将本地仓库内容推送至 `https://github.com/Alowree/vitepress.git`
2. 登录 Vercel 新建一个项目，拉取上述仓库，进行构建。报错，按照提示变更 pnpm 版本之后，可构建成功

   ```json
   "packageManager": "pnpm@9.1.1+sha512.14e915759c11f77eac07faba4d019c193ec8637229e62ec99eefb7cf3c3b75c64447882b7c485142451ee3a6b408059cdfb7b7fa0341b975f12d0f7629c71195" // [!!code --]
   "packageManager": "pnpm@9.0.4+sha512.14e915759c11f77eac07faba4d019c193ec8637229e62ec99eefb7cf3c3b75c64447882b7c485142451ee3a6b408059cdfb7b7fa0341b975f12d0f7629c71195" // [!!code ++]
   ```

3. 托管在 Vercel 上的项目，首页样式丢失，导致显示错乱，跟本地预览相同。

## 参考

https://blog.csdn.net/m0_66879773/article/details/136654876
https://geek-docs.com/vuejs/vue-js-questions/188_vuejs_vue_3_vite_app_missing_some_css_rules_after_build.html
